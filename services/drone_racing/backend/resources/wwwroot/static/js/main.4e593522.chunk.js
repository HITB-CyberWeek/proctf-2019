(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{100:function(e,t,r){},102:function(e,t,r){},109:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),o=r(9),s=r.n(o),c=(r(100),r(6)),i=r.n(c),u=r(8),l=r(18),p=r(19),m=r(22),h=r(20),f=r(24),d=r(23),g=(r(102),r(43));function v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?v(r,!0).forEach((function(t){Object(g.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):v(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function E(e){return y.apply(this,arguments)}function y(){return(y=Object(u.a)(i.a.mark((function e(t){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{headers:{Accept:"application/json"}});case 2:return r=e.sent,e.next=5,w(r,t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e,t){return O.apply(this,arguments)}function O(){return(O=Object(u.a)(i.a.mark((function e(t,r){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify(r)});case 2:return a=e.sent,e.next=5,w(a,t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(e,t){return x.apply(this,arguments)}function x(){return(x=Object(u.a)(i.a.mark((function e(t,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return 401!==t.status||r.startsWith("/api/users")||console.log("Not authenticated"),e.next=3,t.json();case 3:if("error"!==(t=e.sent).status){e.next=6;break}return e.abrupt("return",{success:!1,message:"message"in t?t.message:""});case 6:return t="response"in t?t.response:t,e.abrupt("return",b({success:!0},t));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function j(){return C.apply(this,arguments)}function C(){return(C=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("/api/users/me");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e,t){return L.apply(this,arguments)}function L(){return(L=Object(u.a)(i.a.mark((function e(t,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("/api/users/login",{login:t,password:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(e,t,r){return M.apply(this,arguments)}function M(){return(M=Object(u.a)(i.a.mark((function e(t,r,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("/api/users",{name:t,login:r,password:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function D(){return S.apply(this,arguments)}function S(){return(S=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("/api/users/logout");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var N,R,T=r(38),A=r(145),I=r(147),W=r(144),z=r(162),q=r(148),F=r(110),U=r(142),V=r(57),G=r.n(V),H=r(50),K=r(80),_=r(15),J=r(79),Y=r.n(J),$=Object(K.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(".concat(Y.a,")"),backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function Q(e){var t=$();function r(t){"Enter"===t.key&&(t.preventDefault(),e.onLoginButtonClick(N.value,R.value))}return n.a.createElement(U.a,{container:!0,component:"main",className:t.root},n.a.createElement(W.a,null),n.a.createElement(U.a,{item:!0,xs:!1,sm:4,md:7,className:t.image}),n.a.createElement(U.a,{item:!0,xs:12,sm:8,md:5,component:F.a,elevation:6,square:!0},n.a.createElement("div",{className:t.paper},n.a.createElement(A.a,{className:t.avatar},n.a.createElement(G.a,null)),n.a.createElement(H.a,{component:"h1",variant:"h5"},"Login to drone race"),n.a.createElement("form",{className:t.form},n.a.createElement(z.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"login",label:"Login",name:"login",autoComplete:"login",autoFocus:!0,onKeyPress:r,InputProps:{inputRef:function(e){return N=e}}}),n.a.createElement(z.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onKeyPress:r,InputProps:{inputRef:function(e){return R=e}}}),n.a.createElement(I.a,{fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:function(){return e.onLoginButtonClick(N.value,R.value)}},"Login"),n.a.createElement(U.a,{container:!0},n.a.createElement(U.a,{item:!0},n.a.createElement(q.a,{variant:"body2",component:function(e){var t=e.className,r=e.children;return n.a.createElement(_.b,{className:t,to:"/registration"},r)}},"Don't have an account? Register")))))))}var X,Z,ee,te=Object(K.a)((function(e){return{root:{height:"100vh"},image:{backgroundImage:"url(https://source.unsplash.com/random)",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"center"},paper:{margin:e.spacing(8,4),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}}));function re(e){var t=te();function r(t){"Enter"===t.key&&(t.preventDefault(),e.onRegistrationButtonClick(X.value,Z.value,ee.value))}return n.a.createElement(U.a,{container:!0,component:"main",className:t.root},n.a.createElement(W.a,null),n.a.createElement(U.a,{item:!0,xs:!1,sm:4,md:7,className:t.image}),n.a.createElement(U.a,{item:!0,xs:12,sm:8,md:5,component:F.a,elevation:6,square:!0},n.a.createElement("div",{className:t.paper},n.a.createElement(A.a,{className:t.avatar},n.a.createElement(G.a,null)),n.a.createElement(H.a,{component:"h1",variant:"h5"},"Register to drone race"),n.a.createElement("form",{className:t.form,noValidate:!0},n.a.createElement(z.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"name",label:"Your Name",name:"name",autoComplete:"name",autoFocus:!0,onKeyPress:r,InputProps:{inputRef:function(e){return X=e}}}),n.a.createElement(z.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"login",label:"Login",name:"login",autoComplete:"login",onKeyPress:r,InputProps:{inputRef:function(e){return Z=e}}}),n.a.createElement(z.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onKeyPress:r,InputProps:{inputRef:function(e){return ee=e}}}),n.a.createElement(I.a,{fullWidth:!0,variant:"contained",color:"primary",className:t.submit,onClick:function(){return e.onRegistrationButtonClick(X.value,Z.value,ee.value)}},"Register"),n.a.createElement(U.a,{container:!0},n.a.createElement(U.a,{item:!0},n.a.createElement(q.a,{variant:"body2",component:function(e){var t=e.className,r=e.children;return n.a.createElement(_.b,{className:t,to:"/login"},r)}},"Already have an account? Login")))))))}var ae=r(21),ne=r(164),oe=r(161),se=r(84),ce=r.n(se),ie="LOGIN",ue="LOGOUT",le="SHOW_MESSAGE";function pe(e,t){return me.apply(this,arguments)}function me(){return(me=Object(u.a)(i.a.mark((function e(t,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("/api/levels",{title:t,map:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(){return fe.apply(this,arguments)}function fe(){return(fe=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("/api/levels");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(e){return ge.apply(this,arguments)}function ge(){return(ge=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("/api/levels/"+t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ve=r(149);function be(){var e=Object(K.a)((function(e){return{container:{display:"flex",justifyContent:"center",margin:"auto",alignItems:"center",width:"100%",height:"100%"}}}))();return n.a.createElement("div",{className:e.container},n.a.createElement(ve.a,null))}var Ee=r(146),ye=r(152),ke=r(153),Oe=r(151),we=r(60),xe=r.n(we),je=r(150),Ce=Object(K.a)((function(e){return{title:{padding:"10px"}}}));function Pe(e){var t=Ce();return n.a.createElement(H.a,{component:"h2",variant:"h4",gutterBottom:!0,className:t.title},e.children)}var Le=function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={isLoaded:!1,levels:[]},r}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he();case 2:if((t=e.sent).success){e.next=6;break}return this.props.showMessage(t.message?t.message:"Could not load levels, try later"),e.abrupt("return");case 6:this.setState({isLoaded:!0,levels:t.levels});case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.isLoaded?n.a.createElement(Be,{levels:this.state.levels}):n.a.createElement(be,null)}}],[{key:"mapDispatchToProps",value:function(e){return{showMessage:function(t){return e({type:le,message:t})}}}}]),t}(a.Component);function Be(e){return n.a.createElement(je.a,{maxWidth:"lg"},n.a.createElement(Pe,null,"Levels"),n.a.createElement(Ee.a,{component:"nav","aria-label":"levels list"},n.a.createElement(Oe.a,{button:!0,component:_.b,to:"/levels/new"},n.a.createElement(ye.a,null,n.a.createElement(A.a,null,n.a.createElement(xe.a,null))),n.a.createElement(ke.a,{secondary:"Create your own level for drone racing"},"Add new level")),e.levels.map((function(e){return n.a.createElement(Oe.a,{key:e.id,button:!0,component:_.b,to:"/levels/"+e.id},n.a.createElement(ke.a,null,e.title))}))))}var Me=Object(ae.b)(null,Le.mapDispatchToProps)(Le),De=r(154),Se=r(155),Ne=r(165),Re=Object(K.a)((function(e){return{root:{flexGrow:1},menuButton:{color:"white",marginRight:e.spacing(2)},usernameContainer:{display:"inline-flex",justifyContent:"center",alignContent:"center",alignItems:"center",padding:"8px 11px",textTransform:"uppercase",boxSizing:"border-box",verticalAlign:"middle",fontSize:"0.9375rem"},username:{fontWeight:"500",paddingLeft:"8px"},title:{flexGrow:1},titleLink:{color:"inherit",textDecoration:"none",cursor:"pointer",fontSize:"inherit",fontWeight:"inherit"}}}));function Te(e){var t=Re();return n.a.createElement("div",{className:t.root},n.a.createElement(De.a,{position:"static"},n.a.createElement(Se.a,null,n.a.createElement(H.a,{variant:"h6",className:t.title},n.a.createElement(_.b,{to:"/",className:t.titleLink},"Drone racing")),n.a.createElement("div",{style:{position:"relative"}},n.a.createElement("div",{className:t.usernameContainer},n.a.createElement(Ne.a,null),n.a.createElement("div",{className:t.username},e.user.name)),n.a.createElement(I.a,{size:"large",className:t.menuButton,onClick:e.onLogoutButtonClick},"Logout")))))}var Ae,Ie,We=function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(m.a)(this,Object(h.a)(t).call(this,e))).onCreateLevelButtonClick=r.onCreateLevelButtonClick.bind(Object(f.a)(r)),r}return Object(d.a)(t,e),Object(p.a)(t,[{key:"shouldComponentUpdate",value:function(e,t,r){return!1}},{key:"onCreateLevelButtonClick",value:function(){var e=Object(u.a)(i.a.mark((function e(t,r){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pe(t,r);case 2:if((a=e.sent).success){e.next=6;break}return this.props.showMessage(a.message),e.abrupt("return");case 6:n=a.level.id,this.props.history.push("/levels/"+n);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"render",value:function(){return n.a.createElement(ze,{onCreateLevelButtonClick:this.onCreateLevelButtonClick})}}],[{key:"mapDispatchToProps",value:function(e){return{showMessage:function(t){return e({type:le,message:t})}}}}]),t}(a.Component);function ze(e){return n.a.createElement(je.a,{maxWidth:"lg"},n.a.createElement(Pe,null,"Create new level"),n.a.createElement("form",{noValidate:!0},n.a.createElement(U.a,{container:!0,spacing:2},n.a.createElement(U.a,{item:!0,xs:12,sm:6},n.a.createElement(z.a,{name:"title",variant:"outlined",required:!0,fullWidth:!0,id:"title",label:"Title",autoFocus:!0,InputProps:{inputRef:function(e){return Ae=e}}})),n.a.createElement(U.a,{item:!0,xs:12},n.a.createElement(z.a,{name:"map",variant:"outlined",required:!0,fullWidth:!0,id:"map",label:"Map",InputProps:{inputRef:function(e){return Ie=e}},helperText:"Use . for empty cells and * for walls"})),n.a.createElement(U.a,{item:!0,xs:12},n.a.createElement(I.a,{size:"large",variant:"contained",color:"primary",onClick:function(){return e.onCreateLevelButtonClick(Ae.value,Ie.value)}},"Create level")))))}var qe=function(e){var t=Object(ae.b)(null,We.mapDispatchToProps)(We),r=Object(T.g)((function(r){var a=r.history;return n.a.createElement(t,Object.assign({history:a},e))}));return n.a.createElement(r,null)};function Fe(e,t,r){return Ue.apply(this,arguments)}function Ue(){return(Ue=Object(u.a)(i.a.mark((function e(t,r,a){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("/api/programs",{levelId:t,title:r,sourceCode:a});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ve(e){return Ge.apply(this,arguments)}function Ge(){return(Ge=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("/api/programs?level_id="+t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function He(e){return Ke.apply(this,arguments)}function Ke(){return(Ke=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("/api/programs/"+t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _e(e,t){return Je.apply(this,arguments)}function Je(){return(Je=Object(u.a)(i.a.mark((function e(t,r){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k("/api/runs",{programId:t,params:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ye(e){return $e.apply(this,arguments)}function $e(){return($e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E("/api/runs?level_id="+t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Qe=r(156),Xe=r(157),Ze=r(160),et=r(158),tt=r(159),rt=r(3),at=function(e){function t(e){var r;Object(l.a)(this,t),r=Object(m.a)(this,Object(h.a)(t).call(this,e));for(var a=Math.sqrt(e.map.length),n=[[]],o=0;o<e.map.length;o++)n[n.length-1].push("*"===e.map[o]),o%a===a-1&&n.push([]);return r.state={size:a,map:n},r}return Object(d.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return n.a.createElement(ot,{size:this.state.size,map:this.state.map})}}]),t}(a.Component),nt=Object(K.a)((function(e){return{map:{marginLeft:"10px",marginBottom:"30px"},row:{display:"block","&:first-child > div":{borderTop:"1px solid #ccc"},"&:first-child > :first-child":{backgroundColor:"green",borderColor:"green",borderTopColor:"#ccc"},"&:last-child > :last-child":{backgroundColor:"red",borderColor:"red"}},cell:{display:"inline-block",width:"40px",height:"40px",borderRight:"1px solid #ccc",borderBottom:"1px solid #ccc","&:first-child":{borderLeft:"1px solid #ccc"}},small:{width:"20px",height:"20px"},wall:{backgroundColor:"grey",borderColor:"grey"}}}));function ot(e){for(var t=nt(),r=[],a=0;a<e.size;a++){for(var o=[],s=0;s<e.size;s++)o.push(n.a.createElement(ct,{wall:e.map[a][s],small:e.size>=20,key:a+" "+s}));r.push(n.a.createElement(st,{key:a},o))}return n.a.createElement("div",{className:t.map},r)}function st(e){var t=nt();return n.a.createElement("div",{className:t.row},e.children)}function ct(e){var t=nt(),r=Object(rt.a)(t.cell,e.wall&&t.wall,e.small&&t.small);return n.a.createElement("div",{className:r},"\xa0")}var it=at;var ut=function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={isLoaded:!1,level:{},programs:[],runs:[]},r}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t,r,a,n,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.params.id,e.next=3,de(t);case 3:if((r=e.sent).success){e.next=7;break}return this.props.showMessage(r.message?r.message:"Could not load level"),e.abrupt("return");case 7:return a=r.level,e.next=10,Ve(t);case 10:if((r=e.sent).success){e.next=14;break}return this.props.showMessage(r.message?r.message:"Could not load programs"),e.abrupt("return");case 14:return n=r.programs,e.next=17,Ye(t);case 17:if((r=e.sent).success){e.next=21;break}return this.props.showMessage(r.message?r.message:"Could not load runs"),e.abrupt("return");case 21:o=r.runs.sort((function(e,t){return e.score-t.score})),this.setState({isLoaded:!0,level:a,programs:n,runs:o});case 23:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.isLoaded?n.a.createElement(lt,{level:this.state.level,programs:this.state.programs,runs:this.state.runs}):n.a.createElement(be,null)}}],[{key:"mapDispatchToProps",value:function(e){return{showMessage:function(t){return e({type:le,message:t})}}}}]),t}(a.Component);function lt(e){return n.a.createElement(je.a,{maxWidth:"lg"},n.a.createElement(Pe,null,e.level.title),n.a.createElement(it,{map:e.level.map}),n.a.createElement(U.a,{container:!0,spacing:10},n.a.createElement(U.a,{item:!0,xs:12,md:6},n.a.createElement(Pe,null,"Your drone programs"),n.a.createElement(Ee.a,null,n.a.createElement(Oe.a,{button:!0,component:_.b,to:"/levels/"+e.level.id+"/program"},n.a.createElement(ye.a,null,n.a.createElement(A.a,null,n.a.createElement(xe.a,null))),n.a.createElement(ke.a,{secondary:"Run your drone on this level!"},"Add new program")),e.programs.map((function(t){return n.a.createElement(Oe.a,{key:t.id},n.a.createElement(ke.a,null,t.title),n.a.createElement(I.a,{color:"primary",component:_.b,to:"/levels/"+e.level.id+"/programs/"+t.id},"View and run"))})))),n.a.createElement(U.a,{item:!0,xs:12,md:6},n.a.createElement(Pe,null,"Scoreboard"),e.runs.length>0&&n.a.createElement(Qe.a,{stickyHeader:!0},n.a.createElement(Xe.a,null,n.a.createElement(et.a,null,n.a.createElement(tt.a,null,"AUTHOR"),n.a.createElement(tt.a,null,"PROGRAM"),n.a.createElement(tt.a,{align:"right"},"MOVES"))),n.a.createElement(Ze.a,null,e.runs.map((function(e){return n.a.createElement(et.a,{key:e.id},n.a.createElement(tt.a,null,e.program.author.name),n.a.createElement(tt.a,{scope:"row"},e.program.title),n.a.createElement(tt.a,{align:"right"},e.score))})))),0===e.runs.length&&n.a.createElement(H.a,{color:"textSecondary"},"No runs for a while. Be the first!"))))}var pt=Object(ae.b)(null,ut.mapDispatchToProps)((function(e){var t=Object(T.f)();return n.a.createElement(ut,Object.assign({params:t},e))}));var mt,ht,ft=function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={isLoaded:!1,level:{},compilationError:""},r.onCreateProgramButtonClick=r.onCreateProgramButtonClick.bind(Object(f.a)(r)),r}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t,r,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.params.id,e.next=3,de(t);case 3:if((r=e.sent).success){e.next=7;break}return this.props.showMessage(r.message?r.message:"Could not load level"),e.abrupt("return");case 7:a=r.level,this.setState({isLoaded:!0,level:a});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onCreateProgramButtonClick",value:function(){var e=Object(u.a)(i.a.mark((function e(t,r,a){var n,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fe(t,r,a);case 2:if((n=e.sent).success){e.next=6;break}return this.setState({compilationError:n.message}),e.abrupt("return");case 6:o=n.programId,this.props.history.push("/levels/"+t+"/programs/"+o);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r,a){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.isLoaded?n.a.createElement(dt,{level:this.state.level,compilationError:this.state.compilationError,onCreateProgramButtonClick:this.onCreateProgramButtonClick}):n.a.createElement(be,null)}}],[{key:"mapDispatchToProps",value:function(e){return{showMessage:function(t){return e({type:le,message:t})}}}}]),t}(a.Component);function dt(e){return n.a.createElement(je.a,{maxWidth:"lg"},n.a.createElement(Pe,null,'Upload drone program for level "',e.level.title,'"'),n.a.createElement("form",{noValidate:!0},n.a.createElement(U.a,{container:!0,spacing:2},n.a.createElement(U.a,{item:!0,xs:12,sm:6},n.a.createElement(z.a,{name:"title",variant:"outlined",required:!0,fullWidth:!0,id:"title",label:"Title",autoFocus:!0,InputProps:{inputRef:function(e){return mt=e}},helperText:"Just for scoreboard"}))),n.a.createElement(U.a,{container:!0,spacing:2},n.a.createElement(U.a,{item:!0,xs:12,md:6},n.a.createElement(z.a,{name:"source_code",variant:"outlined",required:!0,fullWidth:!0,id:"source_Code",label:"Source Code",multiline:!0,rows:20,InputProps:{inputRef:function(e){return ht=e}},helperText:"Use if statements, for loops, functions and other features from our Drone Language!"})),n.a.createElement(U.a,{item:!0,xs:12,md:6},n.a.createElement(H.a,{color:"error",paragraph:!0},e.compilationError)),n.a.createElement(U.a,{item:!0,xs:12},n.a.createElement(I.a,{size:"large",variant:"contained",color:"primary",onClick:function(){return e.onCreateProgramButtonClick(e.level.id,mt.value,ht.value)}},"Save program")))))}var gt=function(e){var t=Object(T.f)(),r=Object(ae.b)(null,ft.mapDispatchToProps)(ft),a=Object(T.g)((function(a){var o=a.history;return n.a.createElement(r,Object.assign({params:t,history:o},e))}));return n.a.createElement(a,null)};function vt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}var bt=function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={isLoaded:!1,level:{},program:{},params:[],runError:"",output:"",score:null},r.onChangeParam=r.onChangeParam.bind(Object(f.a)(r)),r.onRunProgram=r.onRunProgram.bind(Object(f.a)(r)),r}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t,r,a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.params.id,e.next=3,de(t);case 3:if((r=e.sent).success){e.next=7;break}return this.props.showMessage(r.message?r.message:"Could not load level"),e.abrupt("return");case 7:return a=r.level,e.next=10,He(this.props.params.programId);case 10:if((r=e.sent).success){e.next=14;break}return this.props.showMessage(r.message?r.message:"Could not load program"),e.abrupt("return");case 14:n=r.program,this.setState({isLoaded:!0,level:a,program:n,params:[["",""]],runErrorMessage:"",output:"",score:null,success:null});case 16:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onChangeParam",value:function(e,t,r){this.setState((function(a){var n=a.params;return n[e][t]=r,e===n.length-1&&n.push(["",""]),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?vt(r,!0).forEach((function(t){Object(g.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):vt(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},a,{params:n})}))}},{key:"onRunProgram",value:function(){var e=Object(u.a)(i.a.mark((function e(t,r){var a,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},r.forEach((function(e){var t=e.key,r=e.value;a[t]=r})),e.next=4,_e(t,a);case 4:if((n=e.sent).success){e.next=8;break}return this.props.showMessage(n.message?n.message:"Can't run your program on drone"),e.abrupt("return");case 8:if(!n.error){e.next=11;break}return this.setState({runErrorMessage:n.errorMessage,output:"",score:null,success:null}),e.abrupt("return");case 11:this.setState({runErrorMessage:n.errorMessage,output:n.output,score:n.run.score,success:n.run.success});case 12:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"render",value:function(){return this.state.isLoaded?n.a.createElement(Et,{level:this.state.level,program:this.state.program,params:this.state.params,runErrorMessage:this.state.runErrorMessage,output:this.state.output,score:this.state.score,success:this.state.success,onChangeParam:this.onChangeParam,onRunProgram:this.onRunProgram}):n.a.createElement(be,null)}}],[{key:"mapDispatchToProps",value:function(e){return{showMessage:function(t){return e({type:le,message:t})}}}}]),t}(a.Component);function Et(e){return n.a.createElement(je.a,{maxWidth:"lg"},n.a.createElement(Pe,null,e.program.title),n.a.createElement(U.a,{container:!0,spacing:10},n.a.createElement(U.a,{item:!0,xs:12,md:6},n.a.createElement(H.a,{gutterBottom:!0,paragraph:!0},'Run drone with this program on level "',e.level.title,'" with following parameters:'),n.a.createElement(Qe.a,{stickyHeader:!0},n.a.createElement(Xe.a,null,n.a.createElement(et.a,null,n.a.createElement(tt.a,null,"NAME"),n.a.createElement(tt.a,null,"VALUE"))),n.a.createElement(Ze.a,null,e.params.map((function(t,r){return n.a.createElement(et.a,{key:r},n.a.createElement(tt.a,{scope:"row"},n.a.createElement(z.a,{value:t[0],onChange:function(t){return e.onChangeParam(r,0,t.target.value)},label:"Name"})),n.a.createElement(tt.a,null,n.a.createElement(z.a,{value:t[1],onChange:function(t){return e.onChangeParam(r,1,t.target.value)},label:"Value"})))}))))),n.a.createElement(U.a,{item:!0,xs:12,md:6},e.runErrorMessage&&n.a.createElement(H.a,{color:"error"},"Error on running your program: ",e.runErrorMessage),!1===e.success&&n.a.createElement(H.a,{color:"error",variant:"h4"},"Your drone did not reach the finish :-("),!0===e.success&&n.a.createElement(n.a.Fragment,null,n.a.createElement(H.a,{color:"textPrimary",variant:"h4"},"Your program did ",e.score," moves!"),n.a.createElement(H.a,{color:"textSecondary",variant:"body1",paragraph:!0},"Return back to ",n.a.createElement(_.b,{to:"/levels/"+e.level.id},"other programs"),".")),n.a.createElement(H.a,{color:"primary"},e.output)),n.a.createElement(U.a,{item:!0,xs:12},n.a.createElement(I.a,{size:"large",variant:"contained",color:"primary",onClick:function(){return e.onRunProgram(e.program.id,e.params)}},"Run drone!"))))}var yt=Object(ae.b)(null,bt.mapDispatchToProps)((function(e){var t=Object(T.f)();return n.a.createElement(bt,Object.assign({params:t},e))}));var kt=function(e){function t(e){var r;return Object(l.a)(this,t),(r=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={isLoaded:!1},r.onLoginButtonClick=r.onLoginButtonClick.bind(Object(f.a)(r)),r.onRegistrationButtonClick=r.onRegistrationButtonClick.bind(Object(f.a)(r)),r.onLogoutButtonClick=r.onLogoutButtonClick.bind(Object(f.a)(r)),r.onCloseSnackbar=r.onCloseSnackbar.bind(Object(f.a)(r)),r}return Object(d.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j();case 2:(t=e.sent).success&&this.props.setUser(t.user),this.setState({isLoaded:!0});case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onLoginButtonClick",value:function(){var e=Object(u.a)(i.a.mark((function e(t,r){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P(t,r);case 2:if((a=e.sent).success){e.next=6;break}return this.props.showMessage(a.message),e.abrupt("return");case 6:this.props.setUser(a.user),this.props.history.push("/");case 8:case"end":return e.stop()}}),e,this)})));return function(t,r){return e.apply(this,arguments)}}()},{key:"onRegistrationButtonClick",value:function(){var e=Object(u.a)(i.a.mark((function e(t,r,a){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B(t,r,a);case 2:if((n=e.sent).success){e.next=6;break}return this.props.showMessage(n.message),e.abrupt("return");case 6:return e.next=8,this.onLoginButtonClick(r,a);case 8:case"end":return e.stop()}}),e,this)})));return function(t,r,a){return e.apply(this,arguments)}}()},{key:"onLogoutButtonClick",value:function(){var e=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D();case 2:if(e.sent.success){e.next=6;break}return this.props.showMessage("Can't log out"),e.abrupt("return");case 6:this.props.logout();case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onCloseSnackbar",value:function(){this.props.clearMessage()}},{key:"render",value:function(){return this.state.isLoaded?n.a.createElement(n.a.Fragment,null,this.props.isAuthenticated&&n.a.createElement(Te,{user:this.props.user,onLogoutButtonClick:this.onLogoutButtonClick}),!this.props.isAuthenticated&&this.renderLayoutForNonAuthenticated(),this.props.isAuthenticated&&this.renderLayoutForAuthenticated(),n.a.createElement(ne.a,{anchorOrigin:{vertical:"bottom",horizontal:"right"},open:""!==this.props.message,autoHideDuration:2e3,onClose:this.onCloseSnackbar,ContentProps:{"aria-describedby":"message-id"},message:n.a.createElement("span",{id:"message-id"},this.props.message),action:[n.a.createElement(oe.a,{key:"close","aria-label":"close",color:"inherit",onClick:this.onCloseSnackbar},n.a.createElement(ce.a,null))]})):n.a.createElement(be,null)}},{key:"renderLayoutForNonAuthenticated",value:function(){return n.a.createElement(T.c,null,n.a.createElement(T.a,{exact:!0,path:"/registration"},n.a.createElement(re,{onRegistrationButtonClick:this.onRegistrationButtonClick})),n.a.createElement(T.a,{exact:!0,path:"/login"},n.a.createElement(Q,{onLoginButtonClick:this.onLoginButtonClick})),n.a.createElement(T.a,null,n.a.createElement(Q,{onLoginButtonClick:this.onLoginButtonClick})))}},{key:"renderLayoutForAuthenticated",value:function(){return n.a.createElement("main",{style:{paddingTop:"32px",paddingBottom:"32px"}},n.a.createElement(T.c,null,n.a.createElement(T.a,{exact:!0,path:"/levels"},n.a.createElement(Me,null)),n.a.createElement(T.a,{exact:!0,path:"/levels/new"},n.a.createElement(qe,null)),n.a.createElement(T.a,{exact:!0,path:"/levels/:id"},n.a.createElement(pt,null)),n.a.createElement(T.a,{exact:!0,path:"/levels/:id/program"},n.a.createElement(gt,null)),n.a.createElement(T.a,{exact:!0,path:"/levels/:id/programs/:programId"},n.a.createElement(yt,null)),n.a.createElement(T.a,null,n.a.createElement(Me,null))))}}],[{key:"mapStateToProps",value:function(e){return{isAuthenticated:e.isAuthenticated,user:e.user,message:e.message}}},{key:"mapDispatchToProps",value:function(e){return{showMessage:function(t){return e({type:le,message:t})},clearMessage:function(){return e({type:le,message:""})},setUser:function(t){return e({type:ie,user:t})},logout:function(){return e({type:ue})}}}}]),t}(a.Component),Ot=function(e){var t=Object(ae.b)(kt.mapStateToProps,kt.mapDispatchToProps)(kt),r=Object(T.g)((function(r){var a=r.history;return n.a.createElement(t,Object.assign({history:a},e))}));return n.a.createElement(r,null)};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var wt=r(59);function xt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function jt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xt(r,!0).forEach((function(t){Object(g.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xt(r).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Ct={isAuthenticated:!1,user:{},message:""};var Pt=Object(wt.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ct,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ie:return jt({},e,{isAuthenticated:!0,user:t.user});case ue:return jt({},e,{isAuthenticated:!1,user:{}});case le:return jt({},e,{message:t.message});default:return e}}));s.a.render(n.a.createElement(ae.a,{store:Pt},n.a.createElement(_.a,null,n.a.createElement(Ot,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},79:function(e,t,r){e.exports=r.p+"static/media/drone.274d55f7.jpg"},95:function(e,t,r){e.exports=r(109)}},[[95,1,2]]]);
//# sourceMappingURL=main.4e593522.chunk.js.map